# Backup Operator

[![Go Documentation](https://img.shields.io/badge/go-doc-blue.svg?style=flat)](https://pkg.go.dev/mod/github.com/kubism/backup-operator?tab=packages)
[![Build Status](https://travis-ci.org/kubism/backup-operator.svg?branch=master)](https://travis-ci.org/kubism/backup-operator)
[![Go Report Card](https://goreportcard.com/badge/github.com/kubism/backup-operator)](https://goreportcard.com/report/github.com/kubism/backup-operator)
[![Coverage Status](https://coveralls.io/repos/github/kubism/backup-operator/badge.svg?branch=master)](https://coveralls.io/github/kubism/backup-operator?branch=master)
[![Docker Image Version (latest semver)](https://img.shields.io/docker/v/kubismio/backup-operator.svg?sort=semver)](https://hub.docker.com/r/kubismio/backup-operator/tags)

## Development

### Kubebuilder

This project uses a different project layout than what is generated by
kubebuilder. The layout adheres to the [golang standards](https://github.com/golang-standards/project-layout) layout.
For this to properly work a wrapper is required ([`tools/kubebuilder`](./tools/kubebuilder)),
which makes sure the correct kubebuilder version is available and temporarily
moves files around as required.

While this is certainly not beautiful, this should improve with future versions
of kubebuilder and their plugin capabilities.

#### Known quirks

* When using the kubebuilder CLI to create a new API [`main.go`](./cmd/manager/main.go)
has a wrong controllers import path and has to be fixed manually afterwards.

### Adding a new API

As mentioned before you have to use the wrapper ([`tools/kubebuilder`](./tools/kubebuilder)) to create a new API with the following command (see the official [kubebuilder docs](https://book.kubebuilder.io/cronjob-tutorial/new-api.html)):

```bash
./tools/kubebuilder create api --group backup --version v1alpha1 --kind <newbackup>
```

apiVersion: backup.kubism.io/v1alpha1
kind: ConsulBackupPlan
metadata:
  name: consulbackupplan-sample
spec:
  schedule: "* * * * *"
  activeDeadlineSeconds: 3600
  retention: 2
  address: "localhost:8500"
  username: $CONSUL_HTTP_USERNAME
  password: $CONSUL_HTTP_PASSWORD
  destination:
    s3:
      endpoint: "localhost:8000"
      bucket: "test"
      useSSL: true
      accessKeyId: $S3_ACCESS_KEY_ID
      secretAccessKeyId: $S3_SECRET_ACCESS_KEY
  env:
    - name: CONSUL_HTTP_USERNAME
      value: "user"
    - name: CONSUL_HTTP_PASSWORD
      value: "password"
    - name: S3_ACCESS_KEY_ID
      value: "abc"
    - name: S3_SECRET_ACCESS_KEY
      value: "abc"
    - name: S3_ENCRYPTION_KEY
      value: "256bit"
